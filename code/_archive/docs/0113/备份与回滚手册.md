# DreamBook Kiosk å¤‡ä»½ä¸å›æ»šæ‰‹å†Œ

> ç³»ç»Ÿå¤‡ä»½ç­–ç•¥ã€åº”æ€¥å›æ»šæµç¨‹å’Œæ•°æ®æ¢å¤æŒ‡å—

---

## ğŸ“¦ å¤‡ä»½ç­–ç•¥

### å¤‡ä»½çº§åˆ«çŸ©é˜µ

| çº§åˆ« | èŒƒå›´ | é¢‘ç‡ | ä¿ç•™æœŸ | è‡ªåŠ¨åŒ– |
|------|------|------|--------|--------|
| L1 - é…ç½®å¤‡ä»½ | æ³¨å†Œè¡¨é…ç½® | æ¯æ¬¡ä¿®æ”¹å‰ | æ°¸ä¹… | âœ… è‡ªåŠ¨ |
| L2 - åº”ç”¨å¤‡ä»½ | åº”ç”¨æ–‡ä»¶ + é…ç½® | æ¯æ¬¡éƒ¨ç½²å‰ | 3 ä¸ªç‰ˆæœ¬ | âœ… è‡ªåŠ¨ |
| L3 - æ—¥å¿—å¤‡ä»½ | åº”ç”¨æ—¥å¿— | æ¯å¤© | 30 å¤© | âœ… è‡ªåŠ¨ |
| L4 - å®Œæ•´å¤‡ä»½ | æ•´ä¸ªç³»ç»Ÿ | æ¯å‘¨ | 4 å‘¨ | â¬œ æ‰‹åŠ¨ |

---

## ğŸ›¡ï¸ L1: é…ç½®å¤‡ä»½

### å¤‡ä»½èŒƒå›´

```
æ³¨å†Œè¡¨é…ç½®
â”œâ”€â”€ HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon
â”‚   â”œâ”€â”€ AutoAdminLogon
â”‚   â”œâ”€â”€ DefaultUserName
â”‚   â””â”€â”€ DefaultPassword
â”‚
â””â”€â”€ HKU\DEF\Software\Microsoft\Windows NT\CurrentVersion\Winlogon
    â””â”€â”€ Shell
```

### è‡ªåŠ¨å¤‡ä»½è„šæœ¬

**æ–‡ä»¶:** `backup-registry.bat`

```cmd
@echo off
REM æ³¨å†Œè¡¨é…ç½®å¤‡ä»½è„šæœ¬
REM åœ¨æ¯æ¬¡ä¿®æ”¹é…ç½®å‰è‡ªåŠ¨è¿è¡Œ

setlocal EnableDelayedExpansion

echo ========================================
echo   DreamBook æ³¨å†Œè¡¨å¤‡ä»½ v1.0
echo ========================================
echo.

REM åˆ›å»ºå¤‡ä»½ç›®å½•
set BACKUP_DIR=C:\kiosk\backups\registry
set TIMESTAMP=%date:~0,4%%date:~5,2%%date:~8,2%_%time:~0,2%%time:~3,2%%time:~6,2%
set TIMESTAMP=%TIMESTAMP: =0%
set BACKUP_PATH=%BACKUP_DIR%\%TIMESTAMP%

if not exist "%BACKUP_DIR%" (
    mkdir "%BACKUP_DIR%"
)

mkdir "%BACKUP_PATH%"

echo [å¤‡ä»½] å¤‡ä»½è·¯å¾„: %BACKUP_PATH%
echo.

REM å¤‡ä»½ Winlogon é…ç½®
echo [å¤‡ä»½ 1/2] Winlogon é…ç½®
reg export "HKLM\SOFTWARE\Microsoft\Windows NT\CurrentVersion\Winlogon" "%BACKUP_PATH%\winlogon.reg" /y
if %errorLevel% equ 0 (
    echo [æˆåŠŸ] Winlogon é…ç½®å·²å¤‡ä»½
) else (
    echo [å¤±è´¥] Winlogon é…ç½®å¤‡ä»½å¤±è´¥
)

REM å¤‡ä»½ Default User Shell é…ç½®
echo [å¤‡ä»½ 2/2] Default User Shell é…ç½®
reg load HKU\DEF "C:\Users\Default\NTUSER.DAT"
if %errorLevel% equ 0 (
    reg export "HKU\DEF\Software\Microsoft\Windows NT\CurrentVersion\Winlogon" "%BACKUP_PATH%\shell.reg" /y
    if %errorLevel% equ 0 (
        echo [æˆåŠŸ] Shell é…ç½®å·²å¤‡ä»½
    ) else (
        echo [å¤±è´¥] Shell é…ç½®å¤‡ä»½å¤±è´¥
    )
    reg unload HKU\DEF
) else (
    echo [å¤±è´¥] æ— æ³•åŠ è½½ Default User æ³¨å†Œè¡¨
)

REM åˆ›å»ºå¤‡ä»½å…ƒæ•°æ®
echo Backup Time: %date% %time% > "%BACKUP_PATH%\metadata.txt"
echo User: %USERNAME% >> "%BACKUP_PATH%\metadata.txt"
echo Computer: %COMPUTERNAME% >> "%BACKUP_PATH%\metadata.txt"

echo.
echo ========================================
echo   å¤‡ä»½å®Œæˆï¼
echo ========================================
echo.
echo å¤‡ä»½ä½ç½®: %BACKUP_PATH%
echo.
pause
exit /b 0
```

### æ¢å¤æ­¥éª¤

```cmd
# 1. åˆ—å‡ºå¯ç”¨å¤‡ä»½
dir C:\kiosk\backups\registry

# 2. é€‰æ‹©å¤‡ä»½ï¼ˆä¾‹å¦‚ï¼š20260113_143000ï¼‰
set BACKUP=20260113_143000

# 3. æ¢å¤ Winlogon é…ç½®
reg import "C:\kiosk\backups\registry\%BACKUP%\winlogon.reg"

# 4. æ¢å¤ Shell é…ç½®
reg load HKU\DEF "C:\Users\Default\NTUSER.DAT"
reg import "C:\kiosk\backups\registry\%BACKUP%\shell.reg"
reg unload HKU\DEF

# 5. é‡å¯ç”µè„‘éªŒè¯
shutdown /r /t 30 /c "Registry restored, rebooting..."
```

---

## ğŸ’¾ L2: åº”ç”¨å¤‡ä»½

### å¤‡ä»½èŒƒå›´

```
åº”ç”¨æ–‡ä»¶
â”œâ”€â”€ C:\kiosk\dreambook\
â”‚   â”œâ”€â”€ dreambook.exe
â”‚   â”œâ”€â”€ resources\
â”‚   â””â”€â”€ locales\
â”‚
â””â”€â”€ é…ç½®æ–‡ä»¶
    â””â”€â”€ backend\.env
```

### è‡ªåŠ¨å¤‡ä»½è„šæœ¬

**æ–‡ä»¶:** `backup-application.bat`

```cmd
@echo off
REM åº”ç”¨æ–‡ä»¶å¤‡ä»½è„šæœ¬
REM åœ¨æ¯æ¬¡éƒ¨ç½²å‰è‡ªåŠ¨è¿è¡Œ

setlocal EnableDelayedExpansion

echo ========================================
echo   DreamBook åº”ç”¨å¤‡ä»½ v1.0
echo ========================================
echo.

REM åˆ›å»ºå¤‡ä»½ç›®å½•
set BACKUP_DIR=C:\kiosk\backups\application
set TIMESTAMP=%date:~0,4%%date:~5,2%%date:~8,2%_%time:~0,2%%time:~3,2%%time:~6,2%
set TIMESTAMP=%TIMESTAMP: =0%
set BACKUP_PATH=%BACKUP_DIR%\%TIMESTAMP%

if not exist "%BACKUP_DIR%" (
    mkdir "%BACKUP_DIR%"
)

echo [å¤‡ä»½] å¤‡ä»½è·¯å¾„: %BACKUP_PATH%
echo.

REM æ£€æŸ¥åº”ç”¨æ˜¯å¦å­˜åœ¨
if not exist "C:\kiosk\dreambook" (
    echo [é”™è¯¯] åº”ç”¨ç›®å½•ä¸å­˜åœ¨
    pause
    exit /b 1
)

REM å¤‡ä»½åº”ç”¨æ–‡ä»¶
echo [å¤‡ä»½] æ­£åœ¨å¤‡ä»½åº”ç”¨æ–‡ä»¶...
xcopy "C:\kiosk\dreambook" "%BACKUP_PATH%\dreambook\" /E /I /H /Y
if %errorLevel% equ 0 (
    echo [æˆåŠŸ] åº”ç”¨æ–‡ä»¶å·²å¤‡ä»½
) else (
    echo [å¤±è´¥] åº”ç”¨æ–‡ä»¶å¤‡ä»½å¤±è´¥
    pause
    exit /b 1
)

REM åˆ›å»ºå¤‡ä»½å…ƒæ•°æ®
echo Backup Time: %date% %time% > "%BACKUP_PATH%\metadata.txt"
echo User: %USERNAME% >> "%BACKUP_PATH%\metadata.txt"
echo Computer: %COMPUTERNAME% >> "%BACKUP_PATH%\metadata.txt"

REM è·å–åº”ç”¨ç‰ˆæœ¬ï¼ˆå¦‚æœå¯ç”¨ï¼‰
if exist "C:\kiosk\dreambook\version.txt" (
    type "C:\kiosk\dreambook\version.txt" >> "%BACKUP_PATH%\metadata.txt"
)

REM æ¸…ç†æ—§å¤‡ä»½ï¼ˆä¿ç•™æœ€è¿‘ 3 ä¸ªï¼‰
echo.
echo [æ¸…ç†] æ¸…ç†æ—§å¤‡ä»½ï¼ˆä¿ç•™æœ€è¿‘ 3 ä¸ªï¼‰
for /f "skip=3 delims=" %%D in ('dir /b /ad /o-d "%BACKUP_DIR%"') do (
    echo [åˆ é™¤] %%D
    rmdir /s /q "%BACKUP_DIR%\%%D"
)

echo.
echo ========================================
echo   å¤‡ä»½å®Œæˆï¼
echo ========================================
echo.
echo å¤‡ä»½ä½ç½®: %BACKUP_PATH%
echo.
pause
exit /b 0
```

### å¿«é€Ÿæ¢å¤è„šæœ¬

**æ–‡ä»¶:** `restore-application.bat`

```cmd
@echo off
REM åº”ç”¨å¿«é€Ÿæ¢å¤è„šæœ¬

setlocal EnableDelayedExpansion

echo ========================================
echo   DreamBook åº”ç”¨æ¢å¤ v1.0
echo ========================================
echo.

set BACKUP_DIR=C:\kiosk\backups\application

REM åˆ—å‡ºå¯ç”¨å¤‡ä»½
echo å¯ç”¨çš„å¤‡ä»½:
echo.
set COUNT=0
for /f "delims=" %%D in ('dir /b /ad /o-d "%BACKUP_DIR%"') do (
    set /a COUNT+=1
    echo [!COUNT!] %%D
)

if %COUNT% equ 0 (
    echo [é”™è¯¯] æ²¡æœ‰å¯ç”¨çš„å¤‡ä»½
    pause
    exit /b 1
)

echo.
set /p CHOICE="é€‰æ‹©è¦æ¢å¤çš„å¤‡ä»½ (è¾“å…¥ç¼–å·): "

REM è·å–é€‰æ‹©çš„å¤‡ä»½ç›®å½•
set INDEX=0
for /f "delims=" %%D in ('dir /b /ad /o-d "%BACKUP_DIR%"') do (
    set /a INDEX+=1
    if !INDEX! equ %CHOICE% (
        set SELECTED_BACKUP=%%D
    )
)

if not defined SELECTED_BACKUP (
    echo [é”™è¯¯] æ— æ•ˆçš„é€‰æ‹©
    pause
    exit /b 1
)

set RESTORE_PATH=%BACKUP_DIR%\%SELECTED_BACKUP%\dreambook

echo.
echo [ç¡®è®¤] å°†æ¢å¤å¤‡ä»½: %SELECTED_BACKUP%
echo [è­¦å‘Š] è¿™å°†è¦†ç›–å½“å‰åº”ç”¨æ–‡ä»¶
set /p CONFIRM="ç¡®å®šè¦ç»§ç»­å—ï¼Ÿ(Y/N): "

if /i not "%CONFIRM%"=="Y" (
    echo æ“ä½œå·²å–æ¶ˆ
    pause
    exit /b 0
)

echo.
echo [æ¢å¤] æ­£åœ¨åœæ­¢åº”ç”¨...
taskkill /IM dreambook.exe /F >nul 2>&1

echo [æ¢å¤] æ­£åœ¨æ¢å¤åº”ç”¨æ–‡ä»¶...
xcopy "%RESTORE_PATH%" "C:\kiosk\dreambook\" /E /I /H /Y
if %errorLevel% equ 0 (
    echo [æˆåŠŸ] åº”ç”¨æ–‡ä»¶å·²æ¢å¤
) else (
    echo [å¤±è´¥] åº”ç”¨æ–‡ä»¶æ¢å¤å¤±è´¥
    pause
    exit /b 1
)

echo.
echo ========================================
echo   æ¢å¤å®Œæˆï¼
echo ========================================
echo.
echo [å»ºè®®] é‡å¯ç”µè„‘ä»¥åº”ç”¨æ›´æ”¹
set /p REBOOT="æ˜¯å¦ç«‹å³é‡å¯ï¼Ÿ(Y/N): "

if /i "%REBOOT%"=="Y" (
    shutdown /r /t 10 /c "Application restored, rebooting..."
) else (
    echo è¯·æ‰‹åŠ¨é‡å¯ç”µè„‘
)

pause
exit /b 0
```

---

## ğŸ“ L3: æ—¥å¿—å¤‡ä»½

### è‡ªåŠ¨æ—¥å¿—è½®è½¬è„šæœ¬

**æ–‡ä»¶:** `rotate-logs.ps1`

```powershell
# DreamBook æ—¥å¿—è½®è½¬å’Œå¤‡ä»½è„šæœ¬
# æ¯å¤©è‡ªåŠ¨è¿è¡Œï¼ˆé€šè¿‡ä»»åŠ¡è®¡åˆ’ç¨‹åºï¼‰

$LogDir = "$env:USERPROFILE\dreambook-logs"
$BackupDir = "C:\kiosk\backups\logs"
$RetentionDays = 30

Write-Host "========================================" -ForegroundColor Cyan
Write-Host "  DreamBook æ—¥å¿—è½®è½¬ v1.0" -ForegroundColor Cyan
Write-Host "========================================" -ForegroundColor Cyan
Write-Host ""

# åˆ›å»ºå¤‡ä»½ç›®å½•
if (-not (Test-Path $BackupDir)) {
    New-Item -ItemType Directory -Path $BackupDir -Force | Out-Null
}

# è·å–ä»Šå¤©çš„æ—¥æœŸ
$Today = Get-Date -Format "yyyy-MM-dd"
$TodayLogFile = "$LogDir\app-$Today.log"

Write-Host "[ä¿¡æ¯] æ—¥å¿—ç›®å½•: $LogDir" -ForegroundColor White
Write-Host "[ä¿¡æ¯] å¤‡ä»½ç›®å½•: $BackupDir" -ForegroundColor White
Write-Host ""

# å½’æ¡£æ—§æ—¥å¿—ï¼ˆè¶…è¿‡ 7 å¤©ï¼‰
Write-Host "[å½’æ¡£] å½’æ¡£æ—§æ—¥å¿—æ–‡ä»¶..." -ForegroundColor Yellow

$OldLogs = Get-ChildItem -Path $LogDir -Filter "app-*.log" |
    Where-Object { $_.LastWriteTime -lt (Get-Date).AddDays(-7) -and $_.Name -ne "app-$Today.log" }

foreach ($Log in $OldLogs) {
    $ArchiveName = $Log.BaseName + ".zip"
    $ArchivePath = Join-Path $BackupDir $ArchiveName

    Write-Host "[å½’æ¡£] $($Log.Name) -> $ArchiveName" -ForegroundColor Gray

    Compress-Archive -Path $Log.FullName -DestinationPath $ArchivePath -Force
    Remove-Item -Path $Log.FullName -Force
}

Write-Host "[æˆåŠŸ] å½’æ¡£å®Œæˆ" -ForegroundColor Green
Write-Host ""

# æ¸…ç†è¶…è¿‡ä¿ç•™æœŸçš„å¤‡ä»½
Write-Host "[æ¸…ç†] æ¸…ç†è¶…è¿‡ $RetentionDays å¤©çš„å¤‡ä»½..." -ForegroundColor Yellow

$OldBackups = Get-ChildItem -Path $BackupDir -Filter "*.zip" |
    Where-Object { $_.LastWriteTime -lt (Get-Date).AddDays(-$RetentionDays) }

foreach ($Backup in $OldBackups) {
    Write-Host "[åˆ é™¤] $($Backup.Name)" -ForegroundColor Gray
    Remove-Item -Path $Backup.FullName -Force
}

Write-Host "[æˆåŠŸ] æ¸…ç†å®Œæˆ" -ForegroundColor Green
Write-Host ""

# ç»Ÿè®¡ä¿¡æ¯
$ActiveLogs = Get-ChildItem -Path $LogDir -Filter "app-*.log"
$ArchivedLogs = Get-ChildItem -Path $BackupDir -Filter "*.zip"
$TotalSize = ($ActiveLogs | Measure-Object -Property Length -Sum).Sum / 1MB
$ArchiveSize = ($ArchivedLogs | Measure-Object -Property Length -Sum).Sum / 1MB

Write-Host "========================================" -ForegroundColor Cyan
Write-Host "  ç»Ÿè®¡ä¿¡æ¯" -ForegroundColor Cyan
Write-Host "========================================" -ForegroundColor Cyan
Write-Host "æ´»è·ƒæ—¥å¿—: $($ActiveLogs.Count) ä¸ªæ–‡ä»¶ ($([math]::Round($TotalSize, 2)) MB)" -ForegroundColor White
Write-Host "å½’æ¡£æ—¥å¿—: $($ArchivedLogs.Count) ä¸ªæ–‡ä»¶ ($([math]::Round($ArchiveSize, 2)) MB)" -ForegroundColor White
Write-Host ""
```

### é…ç½®è‡ªåŠ¨è¿è¡Œ

```cmd
# åˆ›å»ºä»»åŠ¡è®¡åˆ’ç¨‹åºä»»åŠ¡
schtasks /create /tn "DreamBook Log Rotation" /tr "powershell.exe -ExecutionPolicy Bypass -File C:\kiosk\scripts\rotate-logs.ps1" /sc daily /st 02:00 /ru SYSTEM

# éªŒè¯ä»»åŠ¡
schtasks /query /tn "DreamBook Log Rotation"
```

---

## ğŸ”„ å¿«é€Ÿå›æ»šæµç¨‹

### åœºæ™¯ 1: é…ç½®é”™è¯¯å›æ»š

**é—®é¢˜:** ä¿®æ”¹æ³¨å†Œè¡¨åæ— æ³•å¯åŠ¨

**å›æ»šæ­¥éª¤:**

```cmd
# 1. è¿›å…¥å®‰å…¨æ¨¡å¼ï¼ˆå¼€æœºæ—¶æŒ‰ F8ï¼‰

# 2. ä»¥ç®¡ç†å‘˜èº«ä»½æ‰“å¼€ CMD

# 3. åˆ—å‡ºå¤‡ä»½
dir C:\kiosk\backups\registry

# 4. æ¢å¤æœ€è¿‘çš„å¤‡ä»½
cd C:\kiosk\backups\registry\[æœ€æ–°å¤‡ä»½ç›®å½•]
reg import winlogon.reg
reg load HKU\DEF "C:\Users\Default\NTUSER.DAT"
reg import shell.reg
reg unload HKU\DEF

# 5. é‡å¯
shutdown /r /t 10
```

**é¢„è®¡æ—¶é—´:** 5 åˆ†é’Ÿ

---

### åœºæ™¯ 2: åº”ç”¨æ›´æ–°å›æ»š

**é—®é¢˜:** æ–°ç‰ˆæœ¬åº”ç”¨æœ‰ bug

**å›æ»šæ­¥éª¤:**

```cmd
# 1. è¿è¡Œæ¢å¤è„šæœ¬
C:\kiosk\scripts\restore-application.bat

# 2. é€‰æ‹©ä¸Šä¸€ä¸ªç¨³å®šç‰ˆæœ¬

# 3. ç¡®è®¤æ¢å¤

# 4. é‡å¯ç”µè„‘
```

**é¢„è®¡æ—¶é—´:** 3 åˆ†é’Ÿ

---

### åœºæ™¯ 3: å®Œå…¨ç³»ç»Ÿå›æ»š

**é—®é¢˜:** ç³»ç»Ÿä¸¥é‡æŸå

**å›æ»šæ­¥éª¤:**

```cmd
# 1. ä½¿ç”¨ Windows ç³»ç»Ÿè¿˜åŸ
# æ§åˆ¶é¢æ¿ â†’ ç³»ç»Ÿ â†’ ç³»ç»Ÿä¿æŠ¤ â†’ ç³»ç»Ÿè¿˜åŸ

# 2. é€‰æ‹©è¿˜åŸç‚¹ï¼ˆå»ºè®®åœ¨æ¯æ¬¡é…ç½®å‰åˆ›å»ºï¼‰

# 3. ç¡®è®¤è¿˜åŸ

# 4. ç³»ç»Ÿè‡ªåŠ¨é‡å¯å¹¶è¿˜åŸ
```

**é¢„è®¡æ—¶é—´:** 15-30 åˆ†é’Ÿ

---

## ğŸš¨ åº”æ€¥å›æ»šå†³ç­–æ ‘

```
éƒ¨ç½²/é…ç½®å‡ºç°é—®é¢˜
    â”‚
    â”œâ”€â”€â–º åº”ç”¨æ— æ³•å¯åŠ¨?
    â”‚       â”‚
    â”‚       â”œâ”€â”€â–º æ˜¯å¦åˆšä¿®æ”¹äº†é…ç½®?
    â”‚       â”‚       â”‚
    â”‚       â”‚       â”œâ”€â”€â–º æ˜¯ â†’ æ‰§è¡Œé…ç½®å›æ»š (åœºæ™¯ 1)
    â”‚       â”‚       â””â”€â”€â–º å¦ â†’ ç»§ç»­æ£€æŸ¥
    â”‚       â”‚
    â”‚       â””â”€â”€â–º æ˜¯å¦åˆšæ›´æ–°äº†åº”ç”¨?
    â”‚               â”‚
    â”‚               â”œâ”€â”€â–º æ˜¯ â†’ æ‰§è¡Œåº”ç”¨å›æ»š (åœºæ™¯ 2)
    â”‚               â””â”€â”€â–º å¦ â†’ æŸ¥çœ‹æ—¥å¿—è¯Šæ–­
    â”‚
    â”œâ”€â”€â–º åŠŸèƒ½å¼‚å¸¸ä½†å¯ä»¥å¯åŠ¨?
    â”‚       â”‚
    â”‚       â””â”€â”€â–º æ‰§è¡Œåº”ç”¨å›æ»š (åœºæ™¯ 2)
    â”‚
    â””â”€â”€â–º ç³»ç»Ÿä¸¥é‡æŸå?
            â”‚
            â””â”€â”€â–º æ‰§è¡Œç³»ç»Ÿè¿˜åŸ (åœºæ™¯ 3)
```

---

## ğŸ“‹ å›æ»šæ£€æŸ¥æ¸…å•

### å›æ»šå‰æ£€æŸ¥

- [ ] ç¡®è®¤å½“å‰é—®é¢˜ä¸¥é‡ç¨‹åº¦
- [ ] è®°å½•å½“å‰çŠ¶æ€å’Œé”™è¯¯ä¿¡æ¯
- [ ] éªŒè¯å¤‡ä»½æ–‡ä»¶å®Œæ•´æ€§
- [ ] é€šçŸ¥ç›¸å…³äººå‘˜
- [ ] å‡†å¤‡å›æ»šæ‰€éœ€æ—¶é—´çª—å£

### å›æ»šä¸­æ“ä½œ

- [ ] åœæ­¢ç›¸å…³æœåŠ¡
- [ ] æ‰§è¡Œå›æ»šæ­¥éª¤
- [ ] è®°å½•å›æ»šè¿‡ç¨‹
- [ ] éªŒè¯æ¯ä¸ªæ­¥éª¤æˆåŠŸ

### å›æ»šåéªŒè¯

- [ ] åº”ç”¨å¯ä»¥æ­£å¸¸å¯åŠ¨
- [ ] æ ¸å¿ƒåŠŸèƒ½æ­£å¸¸å·¥ä½œ
- [ ] æ²¡æœ‰æ–°çš„é”™è¯¯æ—¥å¿—
- [ ] ç”¨æˆ·å¯ä»¥æ­£å¸¸ä½¿ç”¨
- [ ] æ›´æ–°æ–‡æ¡£è®°å½•

---

## ğŸ’¡ æœ€ä½³å®è·µ

### 1. åˆ›å»ºç³»ç»Ÿè¿˜åŸç‚¹

```cmd
# åœ¨æ¯æ¬¡é‡å¤§ä¿®æ”¹å‰åˆ›å»ºè¿˜åŸç‚¹
wmic.exe /Namespace:\\root\default Path SystemRestore Call CreateRestorePoint "Before DreamBook Config Change", 100, 7

# éªŒè¯è¿˜åŸç‚¹
vssadmin list shadows
```

### 2. ç‰ˆæœ¬æ§åˆ¶

æ¯ä¸ªå¤‡ä»½åº”åŒ…å«ç‰ˆæœ¬ä¿¡æ¯ï¼š

```
C:\kiosk\backups\
â”œâ”€â”€ registry\
â”‚   â”œâ”€â”€ 20260113_143000\  â† å¤‡ä»½æ—¶é—´
â”‚   â”‚   â”œâ”€â”€ winlogon.reg
â”‚   â”‚   â”œâ”€â”€ shell.reg
â”‚   â”‚   â””â”€â”€ metadata.txt  â† åŒ…å«ç‰ˆæœ¬ä¿¡æ¯
â”‚   â””â”€â”€ ...
â””â”€â”€ application\
    â”œâ”€â”€ v1.0.0_20260113_140000\  â† ç‰ˆæœ¬ + æ—¶é—´
    â”‚   â”œâ”€â”€ dreambook\
    â”‚   â””â”€â”€ metadata.txt
    â””â”€â”€ ...
```

### 3. è‡ªåŠ¨åŒ–å¤‡ä»½

```cmd
# ä¿®æ”¹ setup-kiosk.batï¼Œåœ¨é…ç½®å‰è‡ªåŠ¨å¤‡ä»½
call backup-registry.bat

# ä¿®æ”¹éƒ¨ç½²è„šæœ¬ï¼Œåœ¨éƒ¨ç½²å‰è‡ªåŠ¨å¤‡ä»½
call backup-application.bat
```

### 4. æµ‹è¯•æ¢å¤æµç¨‹

å®šæœŸæµ‹è¯•æ¢å¤æµç¨‹ç¡®ä¿å¤‡ä»½å¯ç”¨ï¼š

```cmd
# æ¯æœˆæµ‹è¯•æ—¥ç¨‹
1. æ¢å¤æœ€æ–°çš„æ³¨å†Œè¡¨å¤‡ä»½
2. æ¢å¤æœ€æ–°çš„åº”ç”¨å¤‡ä»½
3. éªŒè¯åŠŸèƒ½æ­£å¸¸
4. è®°å½•æµ‹è¯•ç»“æœ
```

---

## ğŸ“ åº”æ€¥è”ç³»æµç¨‹

```
å‘ç°ä¸¥é‡é—®é¢˜
    â”‚
    â”œâ”€â”€â–º 1. è¯„ä¼°å½±å“èŒƒå›´
    â”‚      (æ˜¯å¦å½±å“ç”¨æˆ·ä½¿ç”¨?)
    â”‚
    â”œâ”€â”€â–º 2. å†³å®šå›æ»š or ä¿®å¤
    â”‚      (å›æ»šæ›´å¿« vs ä¿®å¤æ›´å½»åº•)
    â”‚
    â”œâ”€â”€â–º 3. æ‰§è¡Œå›æ»š (å¦‚æœé€‰æ‹©å›æ»š)
    â”‚      (æŒ‰ç…§ä¸Šè¿°æµç¨‹)
    â”‚
    â”œâ”€â”€â–º 4. éªŒè¯æ¢å¤
    â”‚      (åŠŸèƒ½æµ‹è¯•)
    â”‚
    â””â”€â”€â–º 5. è®°å½•äº‹ä»¶
           (æ›´æ–°æ–‡æ¡£)
```

---

**æœ€åæ›´æ–°:** 2026-01-13
**ç‰ˆæœ¬:** 1.0
**çŠ¶æ€:** âœ… å®Œæˆ
